<% provide(:title, @author.asurname) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= @author.asurname %>, 
        <%= @author.a1stname %>
     </h1>
    </section>
    <section>
      <h4> This author has 
      <%= pluralize(@author.books.count, "book") %> 
      in our library 
      <% if @author.reviews? %>
        with an average rating of 
        <%= @author.reviews.average(:rating).round(1) %>
      <% end %>
      </h4>
    </section>
    <% if current_user.admin? %>  
    <section>
        <%= link_to "delete", @author, method: :delete, data: {confirm: "This will delete the current author and all books attached to it. Are you sure?" } %>
        | <%= link_to "edit", edit_author_path(@author) %>
      </section>
    <% end %>
    <section>
      <%= link_to "Add Book", new_book_path, class: "btn btn-large btn-primary" %>
    </section>
    <% if current_user.admin? %>
    <% end %>
  </aside>
  <div class="span8">
    <% if @author.books.any? %>
      <h3>Books (<%= @author.books.count %>)</h3>
      <ol class="microposts">
        <%= render @books %>
      </ol>
      <%= will_paginate @books %>
    <% else %>
      <h3> Author has no books. Please take a second to add one. </h3>
    <% end %>
  </div>
</div>
